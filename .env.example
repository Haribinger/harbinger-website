# =============================================================================
# Harbinger — Environment Variable Reference
# =============================================================================
# Copy this file to .env and fill in values before starting the stack.
#
#   cp .env.example .env
#
# Variables without defaults MUST be set before docker-compose up will work.
# Never commit .env to source control — it is listed in .gitignore.
# =============================================================================

# -----------------------------------------------------------------------------
# PostgreSQL
# -----------------------------------------------------------------------------
# Database name created on first run.
POSTGRES_DB=harbinger

# Database superuser created on first run.
POSTGRES_USER=harbinger

# REQUIRED — set a strong random password (min 20 chars recommended).
# Generate one with: openssl rand -base64 32
POSTGRES_PASSWORD=

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
# REQUIRED — password for the Redis instance used for rate limiting and caching.
# Generate one with: openssl rand -base64 32
REDIS_PASSWORD=

# -----------------------------------------------------------------------------
# Go API Backend
# -----------------------------------------------------------------------------
# TCP port the API server listens on inside the container.
PORT=8080

# Constructed automatically in docker-compose.yml from POSTGRES_* variables;
# override here only when pointing at an external database.
# DATABASE_URL=postgres://harbinger:CHANGEME@localhost:5432/harbinger?sslmode=require

# REQUIRED — HMAC-SHA256 signing secret for JWT tokens (minimum 32 bytes).
# Generate one with: openssl rand -base64 48
JWT_SECRET=

# How long access tokens remain valid. Uses Go duration syntax (e.g. 24h, 1h30m).
JWT_EXPIRY=24h

# Allowed CORS origin(s). Comma-separated for multiple values.
CORS_ORIGIN=http://localhost:3000

# -----------------------------------------------------------------------------
# Docker / Container Orchestration
# -----------------------------------------------------------------------------
# Address of the Docker socket proxy. The default points at the proxy service
# defined in docker-compose.yml — change only when using an external daemon.
DOCKER_HOST=tcp://docker-proxy:2375

# Docker network that scan containers are attached to.
DOCKER_NETWORK=harbinger-net

# Maximum number of concurrently running scan containers.
MAX_CONTAINERS=20

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
# Maximum API requests per minute per authenticated user.
RATE_LIMIT_RPM=10

# -----------------------------------------------------------------------------
# Credits
# -----------------------------------------------------------------------------
# Credits awarded to new users on sign-up.
DEFAULT_CREDITS=50

# -----------------------------------------------------------------------------
# Stripe (optional — required only for billing features)
# -----------------------------------------------------------------------------
# Secret API key from the Stripe dashboard (sk_live_... or sk_test_...).
STRIPE_SECRET_KEY=

# Webhook signing secret from the Stripe dashboard (whsec_...).
STRIPE_WEBHOOK_SECRET=

# -----------------------------------------------------------------------------
# Webhooks (optional)
# -----------------------------------------------------------------------------
# URL to POST scan-completion events to (leave blank to disable).
WEBHOOK_URL=

# -----------------------------------------------------------------------------
# Audit Logging
# -----------------------------------------------------------------------------
# File path for the JSON Lines audit log written by the API container.
AUDIT_LOG_PATH=./logs/audit.jsonl

# -----------------------------------------------------------------------------
# Frontend (Vite — build-time variables, prefix VITE_)
# -----------------------------------------------------------------------------
# Public URL of the API, reachable from the user's browser.
VITE_API_URL=http://localhost:8080

# Public WebSocket URL of the API, reachable from the user's browser.
VITE_WS_URL=ws://localhost:8080

# Optional analytics integration (leave blank to disable).
VITE_ANALYTICS_ENDPOINT=
VITE_ANALYTICS_WEBSITE_ID=
